--- configure.in.orig	2012-01-21 00:52:52.000000000 +0000
+++ configure.in	2012-01-29 18:46:09.544462430 +0000
@@ -85,6 +85,8 @@
 x11_disabled="== X11 disabled. =="
 pulse_not_found="== Could not find libpulse. PulseAudio support disabled. =="
 pulse_disabled="== PulseAudio support manually disabled. =="
+mysql_not_found="Could not find required library libmysqlclient for MythTV."
+mythtv_disabled="== MythTV support disabled. =="
 dvdcss_enabled="== DVDCSS support enabled. =="
 dvdcss_disabled="== DVDCSS support disabled. =="
 hal_not_found="== Could not find hal. HAL support disabled. =="
@@ -325,6 +327,12 @@
   [use_ffmpeg_libvorbis=$enableval],
   [use_ffmpeg_libvorbis=no])
 
+AC_ARG_ENABLE([mythtv],
+  [AS_HELP_STRING([--enable-mythtv],
+  [enable MythTV support (default is yes)])],
+  [use_mythtv=$enableval],
+  [use_mythtv=yes])
+
 AC_ARG_ENABLE([dvdcss],
   [AS_HELP_STRING([--enable-dvdcss],
   [enable DVDCSS support (default is yes)])],
@@ -675,6 +683,7 @@
 fi
 
 # platform common libraries
+if test "$use_mythtv" = "yes"; then
 AC_CHECK_PROG(MYSQL_CONFIG, mysql_config, "yes", "no")
 if test $MYSQL_CONFIG = "yes"; then
   INCLUDES="$INCLUDES `mysql_config --include`"
@@ -684,6 +693,12 @@
 else
   AC_MSG_ERROR($missing_program)
 fi
+  AC_CHECK_LIB([mysqlclient], [main],
+    AC_DEFINE([BUILD_MYTHTV], [1], [Define to 1 to build mythtv.]),
+    AC_MSG_ERROR($mysql_not_found))
+else
+  AC_MSG_RESULT($mythtv_disabled)
+fi
 AC_CHECK_HEADER([ass/ass.h],, AC_MSG_ERROR($missing_library))
 AC_CHECK_HEADER([mpeg2dec/mpeg2.h],, AC_MSG_ERROR($missing_library))
 AC_CHECK_HEADER([mpeg2dec/mpeg2convert.h],, AC_MSG_ERROR($missing_library),
@@ -718,7 +733,6 @@
 AC_CHECK_LIB([z],           [main],, AC_MSG_ERROR($missing_library))
 AC_CHECK_LIB([crypto],      [main],, AC_MSG_ERROR($missing_library))
 AC_CHECK_LIB([ssl],         [main],, AC_MSG_ERROR($missing_library))
-AC_CHECK_LIB([mysqlclient], [main],, AC_MSG_ERROR($missing_library))
 AC_CHECK_LIB([ssh],         [sftp_tell64],, AC_MSG_RESULT([Could not find suitable version of libssh]))
 AC_CHECK_LIB([bluetooth],   [hci_devid],, AC_MSG_RESULT([Could not find suitable version of libbluetooth]))
 AC_CHECK_LIB([yajl],        [main],, AC_MSG_ERROR($missing_library))
@@ -1704,6 +1718,12 @@
   final_message="$final_message\n  HAL Support:\tNo"
 fi
 
+if test "$use_mythtv" = "yes"; then
+  final_message="$final_message\n  MythTV:\tYes"
+else
+  final_message="$final_message\n  MythTV:\tNo"
+fi
+
 # DVDCSS
 if test "$use_dvdcss" = "yes"; then
   AC_MSG_NOTICE($dvdcss_enabled)
@@ -1926,6 +1946,7 @@
 AC_SUBST(PYTHON_VERSION)
 AC_SUBST(OUTPUT_FILES)
 AC_SUBST(HAVE_XBMC_NONFREE)
+AC_SUBST(BUILD_MYTHTV)
 AC_SUBST(USE_ASAP_CODEC)
 AC_SUBST(LIBCURL_BASENAME)
 AC_SUBST(LIBFLAC_BASENAME)
